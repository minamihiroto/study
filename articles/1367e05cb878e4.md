---
title: "ngrokã‚’ä½¿ã£ã¦Google Colaboratoryä¸Šã§Flaskã‚’ç«‹ã¦ã‚‹æ–¹æ³•"
emoji: "ğŸ—"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flask","ngrok","Google Colaboratory"]
published: true
---

å€‹äººçš„ã«çµæ§‹è©°ã¾ã£ãŸã€‚
Google Colaboratoryã§GPTã‚’ä½¿ã£ãŸwebã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸãã¦è§¦ã£ã¦ã¾ã—ãŸã€‚24æ™‚é–“ã§æ¶ˆãˆã¡ã‚ƒã†ã‘ã©ã­ã€‚

```bash
# Linuxã«ngrokå…¥ã‚Œã‚‹ã§
!wget https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.tgz
# ngrokå±•é–‹ã‚„
!tar -xvf /content/ngrok-stable-linux-amd64.tgz
# flaskå…¥ã‚Œã‚‹ã§
!pip install flask -q
# ngrokã¨flaskãŒã£ã¡ã‚ƒã‚“ã“
!pip install flask-ngrok -q
# ngrokã®èªè¨¼é€šã™ã§
!./ngrok authtoken #ã“ã“ã«ãƒˆãƒ¼ã‚¯ãƒ³
```

```python
from flask_ngrok import run_with_ngrok
from flask import Flask

app = Flask(__name__)
run_with_ngrok(app)

@app.route("/")
def home():
    html = '''
<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>ã“ã‚“ã«ã¡ã¯</title>
        <meta charset="utf-8"/>
    </head>
    <body>
    <form action="/post" method="POST">
        <h1>å¤–éƒ¨ç”»é¢ã¨ä»®å®š</h1>
        <button type="submit">APIã‚’å©ã</button>
    </form>
    </body>
</html>'''
    return html
  
@app.route('/post', methods=['POST'])
def sample_form_temp():
    print('POSTãƒ‡ãƒ¼ã‚¿å—ã‘å–ã£ãŸã®ã§å‡¦ç†ã—ã¾ã™')
    # ã“ã“ã§ã‚‚ã‚‰ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢ã€GPTã«æŠ•ã’ã‚‹
    # GPTã‹ã‚‰JSONãŒè¿”ã£ã¦ãã‚‹
    print('returnã§æ•´å½¢ã—ãŸJSONè¿”ã—ã¾ã™')
    return 'APIãŒå©ã‹ã‚ŒãŸã®ã§ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ã‚ˆ'
    
app.run()
```

ã“ã‚Œã§ç°¡å˜ã«ç«‹ã¦ã‚ŒãŸğŸ‘

åˆã‚ã«flaskã¨ngrokã‚’åˆ¥ã€…ã§ç«‹ã¦ã¦ã—ã¾ã£ãŸãŸã‚ã«èº“ã„ãŸã€‚
ä¸Šè¨˜ã®ã‚ˆã†ã«flask-ngrokã§ã©ã†ã«ã‹ãªã£ãŸã€‚

ã‚ã¨ã¯ngrokãŒæœ€è¿‘authtokenã‚’å¿…è¦ã«ãªã£ãŸã‚‰ã—ã„ã€‚