---
title: "FlutterÃ—Firebaseã§ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®é…åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ“±"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "Firebase"]
published: public
---

é…åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’Firebaseã‹ã‚‰å–å¾—ã™ã‚‹æ–¹æ³•ãŒãã¡ã‚ƒãã¡ã‚ƒã—ã¡ã‚ƒã£ãŸã®ã§ã€å‚™å¿˜éŒ²

```dart
// StatefulWidgetã®ä¸­ã§ã„ã¤ã‚‚ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’å¼•ã£å¼µã£ã¦ãã‚‹
Future<Map<String, dynamic>> myBook() async {
    final snapshot = await FirebaseFirestore.instance.collection('users').get();
    final document = snapshot.docs.first.data();
    return document;
  }

  // mapãŒå…¥ã‚‹å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹
  List<Map<String, dynamic>> mapBookmark = [];

  @override
  void initState() {
    super.initState();
    myBook().then(
      (Map<String, dynamic> value) async {
        // é…åˆ—ã‚’å–å¾—ã™ã‚‹
        final bookmarkList = value['bookmark'] as List;
        // mapBookmarkã«ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹
        mapBookmark = await Future.wait(
          bookmarkList.map(
            // mapã®ä¸­ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’å–ã‚‹ã¨ãã¯async,awaitã‚’ä½¿ã†
            (e) async {
              // docã«ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹
              final doc = await (e as DocumentReference).get();
              return doc.data();
            },
          ).toList(),
        );
        setState(() {});
      },
    );
  }

  //ä½¿ã„æ–¹
  children: mapBookmark.map((document) {
              return ListTile(
                title: Text('${document['booktitle']}'),
                subtitle: Text('${document['genre']}'),
              );
            }).toList(),
```
